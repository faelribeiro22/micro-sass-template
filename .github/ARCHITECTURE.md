# ğŸ—ï¸ Arquitetura do MicroSaaS Template

## ğŸ“Š VisÃ£o Geral em Camadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              TanStack Start + React                  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   Routes    â”‚  â”‚ Components  â”‚  â”‚    Lib      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ (Pages/API) â”‚  â”‚  (UI/Auth)  â”‚  â”‚  (Utils)    â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AUTENTICAÃ‡ÃƒO                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Better Auth                       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Email/Password â”‚ Sessions â”‚ OAuth Ready             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            PostgreSQL + Drizzle ORM                  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  users â”‚ sessions â”‚ accounts â”‚ verification_tokens   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de Dados

### AutenticaÃ§Ã£o (Login)

```
User Input (LoginForm)
        â”‚
        â–¼
authClient.signIn.email()
        â”‚
        â–¼
Better Auth Client
        â”‚
        â–¼
POST /api/auth/sign-in
        â”‚
        â–¼
Better Auth Server (src/auth.ts)
        â”‚
        â”œâ”€â–º Validate credentials
        â”‚
        â”œâ”€â–º Query database (users)
        â”‚
        â”œâ”€â–º Create session
        â”‚
        â””â”€â–º Return session cookie
        â”‚
        â–¼
Redirect to /dashboard
```

### Registro de UsuÃ¡rio

```
User Input (SignupForm)
        â”‚
        â–¼
authClient.signUp.email()
        â”‚
        â–¼
POST /api/auth/sign-up
        â”‚
        â–¼
Better Auth Server
        â”‚
        â”œâ”€â–º Validate data
        â”‚
        â”œâ”€â–º Hash password
        â”‚
        â”œâ”€â–º Insert into users table
        â”‚
        â”œâ”€â–º Create account record
        â”‚
        â”œâ”€â–º Create session
        â”‚
        â””â”€â–º Return session cookie
        â”‚
        â–¼
Redirect to /dashboard
```

### ProteÃ§Ã£o de Rotas

```
User Access /dashboard
        â”‚
        â–¼
Route beforeLoad hook
        â”‚
        â–¼
Check session (useSession)
        â”‚
        â”œâ”€â–º Session exists?
        â”‚   â”‚
        â”‚   â”œâ”€â–º YES: Allow access
        â”‚   â”‚
        â”‚   â””â”€â–º NO: Redirect to /login
        â”‚
        â–¼
Render Dashboard
```

### API Request Flow

```
Client Request
        â”‚
        â–¼
/api/endpoint (Route)
        â”‚
        â–¼
server.handlers.GET/POST
        â”‚
        â”œâ”€â–º Validate auth (if needed)
        â”‚
        â”œâ”€â–º Query database (Drizzle)
        â”‚
        â”œâ”€â–º Process data
        â”‚
        â””â”€â–º Return json()
        â”‚
        â–¼
Client receives response
```

## ğŸ“‚ Estrutura Detalhada de Arquivos

```
micro-sass/
â”‚
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ PROJECT_CONTEXT.md        # ğŸ“š Contexto do projeto
â”‚   â”œâ”€â”€ copilot-instructions.md   # ğŸ¤– InstruÃ§Ãµes para IA
â”‚   â””â”€â”€ PROMPT_EXAMPLES.md        # ğŸ’¡ Exemplos de prompts
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ manifest.json             # PWA manifest
â”‚   â””â”€â”€ robots.txt                # SEO
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx     # ğŸ” Form de login
â”‚   â”‚   â”‚   â””â”€â”€ SignupForm.tsx    # ğŸ“ Form de registro
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â””â”€â”€ Layout.tsx        # ğŸ¨ Layout principal
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â”œâ”€â”€ Button.tsx        # ğŸ”˜ Componente botÃ£o
â”‚   â”‚       â”œâ”€â”€ Card.tsx          # ğŸƒ Componente card
â”‚   â”‚       â””â”€â”€ Input.tsx         # âŒ¨ï¸ Componente input
â”‚   â”‚
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ index.ts              # ğŸ”Œ Cliente do banco
â”‚   â”‚   â””â”€â”€ schema.ts             # ğŸ“‹ Schema Drizzle
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ auth-client.ts        # ğŸ”‘ Cliente auth
â”‚   â”‚   â””â”€â”€ utils.ts              # ğŸ› ï¸ UtilitÃ¡rios
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ auth/
â”‚   â”‚   â”‚       â””â”€â”€ $.ts          # ğŸŒ Handlers auth
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ __root.tsx            # ğŸ  Root layout
â”‚   â”‚   â”œâ”€â”€ index.tsx             # ğŸ“„ Landing page
â”‚   â”‚   â”œâ”€â”€ login.tsx             # ğŸ” PÃ¡gina login
â”‚   â”‚   â”œâ”€â”€ signup.tsx            # ğŸ“ PÃ¡gina registro
â”‚   â”‚   â””â”€â”€ dashboard.tsx         # ğŸ“Š Dashboard
â”‚   â”‚
â”‚   â”œâ”€â”€ auth.ts                   # âš™ï¸ Config Better Auth
â”‚   â”œâ”€â”€ router.tsx                # ğŸ›£ï¸ Router config
â”‚   â””â”€â”€ styles.css                # ğŸ¨ Estilos globais
â”‚
â”œâ”€â”€ .env                          # ğŸ”’ VariÃ¡veis de ambiente
â”œâ”€â”€ .env.example                  # ğŸ“‹ Template de .env
â”œâ”€â”€ drizzle.config.ts             # âš™ï¸ Config Drizzle
â”œâ”€â”€ package.json                  # ğŸ“¦ DependÃªncias
â”œâ”€â”€ tsconfig.json                 # âš™ï¸ Config TypeScript
â”œâ”€â”€ vite.config.ts                # âš™ï¸ Config Vite
â”œâ”€â”€ README.md                     # ğŸ“– DocumentaÃ§Ã£o
â””â”€â”€ QUICKSTART.md                 # ğŸš€ Guia rÃ¡pido
```

## ğŸ—„ï¸ Schema do Banco de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            users                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                UUID PRIMARY KEY                          â”‚
â”‚ email             TEXT UNIQUE NOT NULL                      â”‚
â”‚ name              TEXT                                      â”‚
â”‚ emailVerified     BOOLEAN DEFAULT false                     â”‚
â”‚ image             TEXT                                      â”‚
â”‚ createdAt         TIMESTAMP DEFAULT NOW()                   â”‚
â”‚ updatedAt         TIMESTAMP DEFAULT NOW()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ (1:N)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          sessions                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                TEXT PRIMARY KEY                          â”‚
â”‚ userId            UUID FK â†’ users.id (CASCADE)              â”‚
â”‚ expiresAt         TIMESTAMP NOT NULL                        â”‚
â”‚ createdAt         TIMESTAMP DEFAULT NOW()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          accounts                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                UUID PRIMARY KEY                          â”‚
â”‚ userId            UUID FK â†’ users.id (CASCADE)              â”‚
â”‚ accountId         TEXT NOT NULL                             â”‚
â”‚ providerId        TEXT NOT NULL                             â”‚
â”‚ accessToken       TEXT                                      â”‚
â”‚ refreshToken      TEXT                                      â”‚
â”‚ idToken           TEXT                                      â”‚
â”‚ expiresAt         TIMESTAMP                                 â”‚
â”‚ password          TEXT                                      â”‚
â”‚ createdAt         TIMESTAMP DEFAULT NOW()                   â”‚
â”‚ updatedAt         TIMESTAMP DEFAULT NOW()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    verification_tokens                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                UUID PRIMARY KEY                          â”‚
â”‚ identifier        TEXT NOT NULL                             â”‚
â”‚ token             TEXT UNIQUE NOT NULL                      â”‚
â”‚ expiresAt         TIMESTAMP NOT NULL                        â”‚
â”‚ createdAt         TIMESTAMP DEFAULT NOW()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Ciclo de Vida de uma Request

### 1. Page Request (SSR)

```
Browser Request
        â”‚
        â–¼
Vite Dev Server
        â”‚
        â–¼
TanStack Router
        â”‚
        â”œâ”€â–º Match route (/dashboard)
        â”‚
        â”œâ”€â–º Run beforeLoad
        â”‚   â”‚
        â”‚   â””â”€â–º Check auth
        â”‚
        â”œâ”€â–º Server render component
        â”‚   â”‚
        â”‚   â”œâ”€â–º Fetch data (if needed)
        â”‚   â”‚
        â”‚   â””â”€â–º Generate HTML
        â”‚
        â””â”€â–º Send HTML + Hydration data
        â”‚
        â–¼
Browser
        â”‚
        â”œâ”€â–º Display HTML (FCP)
        â”‚
        â””â”€â–º Hydrate React (TTI)
```

### 2. API Request

```
Component Action
        â”‚
        â–¼
fetch('/api/users')
        â”‚
        â–¼
TanStack Router
        â”‚
        â”œâ”€â–º Match route (/api/users)
        â”‚
        â””â”€â–º Route.server.handlers.GET
            â”‚
            â”œâ”€â–º Extract request data
            â”‚
            â”œâ”€â–º Validate auth
            â”‚
            â”œâ”€â–º Query database
            â”‚   â”‚
            â”‚   â””â”€â–º db.query.users.findMany()
            â”‚
            â”œâ”€â–º Process results
            â”‚
            â””â”€â–º Return json()
                â”‚
                â–¼
        Component receives data
```

## ğŸ¨ Component Hierarchy

```
App (Root)
â”‚
â”œâ”€â”€ Layout
â”‚   â”‚
â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â”œâ”€â”€ Logo
â”‚   â”‚   â”œâ”€â”€ Navigation
â”‚   â”‚   â”‚   â”œâ”€â”€ Link (Dashboard)
â”‚   â”‚   â”‚   â””â”€â”€ Link (Profile)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ UserMenu
â”‚   â”‚       â”œâ”€â”€ Avatar
â”‚   â”‚       â””â”€â”€ Dropdown
â”‚   â”‚           â”œâ”€â”€ Profile Link
â”‚   â”‚           â””â”€â”€ Logout Button
â”‚   â”‚
â”‚   â”œâ”€â”€ Main Content (children)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Page Component
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ Cards
â”‚   â”‚       â”‚   â”œâ”€â”€ CardHeader
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ CardTitle
â”‚   â”‚       â”‚   â”‚
â”‚   â”‚       â”‚   â””â”€â”€ CardContent
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ Forms
â”‚   â”‚           â”œâ”€â”€ Inputs
â”‚   â”‚           â””â”€â”€ Buttons
â”‚   â”‚
â”‚   â””â”€â”€ Footer
â”‚       â””â”€â”€ Copyright
â”‚
â””â”€â”€ Toaster (Global)
```

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Transport Layer                                          â”‚
â”‚    â””â”€â–º HTTPS in production                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Authentication                                           â”‚
â”‚    â”œâ”€â–º Better Auth session management                       â”‚
â”‚    â”œâ”€â–º HTTP-only cookies                                    â”‚
â”‚    â””â”€â–º CSRF tokens                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Authorization                                            â”‚
â”‚    â”œâ”€â–º Route protection (beforeLoad)                        â”‚
â”‚    â””â”€â–º API endpoint validation                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Data Layer                                               â”‚
â”‚    â”œâ”€â–º Prepared statements (Drizzle)                        â”‚
â”‚    â”œâ”€â–º Input validation (Zod)                               â”‚
â”‚    â””â”€â–º Password hashing (bcrypt)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Build & Deploy Pipeline

```
Development
        â”‚
        â”œâ”€â–º npm run dev
        â”‚   â””â”€â–º Vite dev server + HMR
        â”‚
        â–¼
Git Commit & Push
        â”‚
        â–¼
GitHub Actions (CI/CD)
        â”‚
        â”œâ”€â–º Run tests (npm test)
        â”‚
        â”œâ”€â–º Type check (tsc)
        â”‚
        â”œâ”€â–º Build (npm run build)
        â”‚   â”‚
        â”‚   â”œâ”€â–º Bundle assets
        â”‚   â”œâ”€â–º Optimize images
        â”‚   â”œâ”€â–º Generate routes
        â”‚   â””â”€â–º SSR setup
        â”‚
        â””â”€â–º Deploy to Vercel/Railway
            â”‚
            â”œâ”€â–º Set env vars
            â”œâ”€â–º Run migrations
            â””â”€â–º Start server
                â”‚
                â–¼
        Production (https://app.com)
```

## ğŸ“Š Performance Optimization

```
Page Load
        â”‚
        â”œâ”€â–º 1. HTML Shell (SSR)
        â”‚   â””â”€â–º FCP < 1.5s
        â”‚
        â”œâ”€â–º 2. Critical CSS (Tailwind)
        â”‚   â””â”€â–º Inline styles
        â”‚
        â”œâ”€â–º 3. JavaScript Bundle
        â”‚   â”œâ”€â–º Code splitting
        â”‚   â”œâ”€â–º Tree shaking
        â”‚   â””â”€â–º Lazy loading
        â”‚
        â”œâ”€â–º 4. Data Fetching
        â”‚   â”œâ”€â–º Parallel requests
        â”‚   â”œâ”€â–º Caching (TanStack Router)
        â”‚   â””â”€â–º Prefetching
        â”‚
        â””â”€â–º 5. Hydration
            â””â”€â–º TTI < 3s
```

## ğŸ”§ Development Workflow

```
1. Start Development
   â””â”€â–º npm run dev

2. Database Changes
   â”œâ”€â–º Edit src/db/schema.ts
   â””â”€â–º npm run db:push

3. Create Feature
   â”œâ”€â–º Add route in src/routes/
   â”œâ”€â–º Create components
   â”œâ”€â–º Add API endpoints
   â””â”€â–º Update database schema

4. Test Locally
   â”œâ”€â–º Manual testing
   â””â”€â–º npm test

5. Commit & Push
   â””â”€â–º Git workflow

6. Deploy
   â””â”€â–º Automatic via CI/CD
```

---

**VersÃ£o:** 1.0.0  
**Ãšltima AtualizaÃ§Ã£o:** Novembro 2025  
**Mantido por:** [@faelribeiro22](https://github.com/faelribeiro22)
